#include <iostream>
#include <vector>
#include "AStar.h"
#include <cstdlib>

AStarSolver *GlobalSolver_p;

typedef struct{
	uint32_t branches_on_tree;
	uint8_t branch_len;
	std::vector<std::vector<char>> TreeState;
} input_data_t;

//char Tree1[][2] = {{1, 2}, {2, 1}, {0, 0}};
//char Tree2[][4] = {{4, 3, 2, 1}, {1, 6, 3, 5}, {1, 8, 7, 7}, {1, 10, 5, 9}, {6, 10, 6, 8}, {11, 2, 11, 2}, {13, 6, 11, 4}, {13, 12, 4, 8}, {12, 11, 13, 10}, {12, 10, 4, 13}, {12, 9, 5, 7}, {3, 8, 9, 2}, {9, 3, 5, 7}, {0, 0, 0, 0}, {0, 0, 0, 0}};
//char Tree3[][6] = {{1, 2, 2, 2, 3, 1}, {2, 1, 3, 3, 1, 1}, {2, 1, 3, 2, 3, 3}, {0, 0, 0, 0, 0, 0}, {0, 0, 0, 0, 0, 0}};
//char Tree4[][4] = {{2, 3, 2, 1}, {1, 3, 5, 4}, {1, 6, 4, 2}, {1, 7, 6, 7}, {8, 8, 6, 5}, {8, 3, 2, 4}, {8, 7, 5, 5}, {4, 3, 7, 6}, {0, 0, 0, 0}, {0, 0, 0, 0}};
//char Tree5[][3] = {{2, 2, 1}, {5, 4, 3}, {5, 3, 6}, {9, 8, 7}, {9, 10, 4}, {8, 11, 6}, {13, 9, 12}, {13, 3, 1}, {13, 6, 5}, {1, 14, 7}, {10, 12, 4}, {14, 8, 14}, {12, 10, 11}, {15, 2, 11}, {7, 15, 15}, {0, 0, 0}, {0, 0, 0}};
//char Tree6[][4] = {{9, 15, 14, 11}, {9, 6, 3, 14}, {4, 8, 8, 12}, {8, 11, 14, 12}, {8, 6, 10, 12}, {13, 7, 13, 6}, {11, 4, 1, 4}, {11, 13, 15, 14}, {1, 10, 7, 10}, {10, 9, 3, 15}, {3, 4, 1, 1}, {7, 15, 9, 12}, {6, 7, 3, 13}, {0, 0, 0, 0}, {0, 0, 0, 0}};
//char Tree7[][5] = {{8, 7, 10, 7, 10}, {13, 6, 1, 3, 11}, {13, 6, 7, 15, 1}, {10, 8, 11, 1, 8}, {14, 13, 14, 13, 3}, {14, 15, 8, 12, 1}, {12, 3, 8, 15, 11}, {15, 12, 12, 12, 10}, {3, 14, 1, 6, 10}, {7, 13, 3, 6, 11}, {7, 14, 6, 15, 11}, {0, 0, 0, 0, 0}, {0, 0, 0, 0, 0}};
//char Tree8[][6] = {{4, 4, 2, 3, 2, 1}, {4, 3, 3, 1, 5, 3}, {1, 2, 4, 3, 5, 5}, {1, 6, 3, 6, 6, 6}, {3, 5, 6, 5, 6, 5}, {2, 3, 2, 2, 3, 6}, {2, 3, 5, 1, 5, 3}, {2, 2, 5, 3, 2, 2}, {2, 5, 4, 5, 6, 6}, {6, 6, 4, 1, 5, 6}, {0, 0, 0, 0, 0, 0}, {0, 0, 0, 0, 0, 0}};

std::vector<std::vector<char>> Tree1 = {{1, 2}, {2, 1}, {0, 0}};
std::vector<std::vector<char>> Tree2 = {{4, 3, 2, 1}, {1, 6, 3, 5}, {1, 8, 7, 7}, {1, 10, 5, 9}, {6, 10, 6, 8}, {11, 2, 11, 2}, {13, 6, 11, 4}, {13, 12, 4, 8}, {12, 11, 13, 10}, {12, 10, 4, 13}, {12, 9, 5, 7}, {3, 8, 9, 2}, {9, 3, 5, 7}, {0, 0, 0, 0}, {0, 0, 0, 0}};
std::vector<std::vector<char>> Tree3 = {{1, 2, 2, 2, 3, 1}, {2, 1, 3, 3, 1, 1}, {2, 1, 3, 2, 3, 3}, {0, 0, 0, 0, 0, 0}, {0, 0, 0, 0, 0, 0}};
std::vector<std::vector<char>> Tree4 = {{2, 3, 2, 1}, {1, 3, 5, 4}, {1, 6, 4, 2}, {1, 7, 6, 7}, {8, 8, 6, 5}, {8, 3, 2, 4}, {8, 7, 5, 5}, {4, 3, 7, 6}, {0, 0, 0, 0}, {0, 0, 0, 0}};
std::vector<std::vector<char>> Tree5 = {{2, 2, 1}, {5, 4, 3}, {5, 3, 6}, {9, 8, 7}, {9, 10, 4}, {8, 11, 6}, {13, 9, 12}, {13, 3, 1}, {13, 6, 5}, {1, 14, 7}, {10, 12, 4}, {14, 8, 14}, {12, 10, 11}, {15, 2, 11}, {7, 15, 15}, {0, 0, 0}, {0, 0, 0}};
std::vector<std::vector<char>> Tree6 = {{'I', 'O', 'N', 'K'}, {'I', 'F', 'C', 'N'}, {'D', 'H', 'H', 'L'}, {'H', 'K', 'N', 'L'}, {'H', 'F', 'J', 'L'}, {'M', 'G', 'M', 'F'}, {'K', 'D', 'A', 'D'}, {'K', 'M', 'O', 'N'}, {'A', 'J', 'G', 'J'}, {'J', 'I', 'C', 'O'}, {'C', 'D', 'A', 'A'}, {'G', 'O', 'I', 'L'}, {'F', 'G', 'C', 'M'}, {0, 0, 0, 0}, {0, 0, 0, 0}};
std::vector<std::vector<char>> Tree7 = {{8, 7, 10, 7, 10}, {13, 6, 1, 3, 11}, {13, 6, 7, 15, 1}, {10, 8, 11, 1, 8}, {14, 13, 14, 13, 3}, {14, 15, 8, 12, 1}, {12, 3, 8, 15, 11}, {15, 12, 12, 12, 10}, {3, 14, 1, 6, 10}, {7, 13, 3, 6, 11}, {7, 14, 6, 15, 11}, {0, 0, 0, 0, 0}, {0, 0, 0, 0, 0}};
std::vector<std::vector<char>> Tree8 = {{4, 4, 2, 3, 2, 1}, {4, 3, 3, 1, 5, 3}, {1, 2, 4, 3, 5, 5}, {1, 6, 3, 6, 6, 6}, {3, 5, 6, 5, 6, 5}, {2, 3, 2, 2, 3, 6}, {2, 3, 5, 1, 5, 3}, {2, 2, 5, 3, 2, 2}, {2, 5, 4, 5, 6, 6}, {6, 6, 4, 1, 5, 6}, {0, 0, 0, 0, 0, 0}, {0, 0, 0, 0, 0, 0}};

std::vector<std::vector<char>> Tree9 = {{2, 3, 3, 1, 2, 1}, {3, 2, 1, 3, 1, 2}, {2, 1, 2, 1, 2, 1}, {1, 3, 3, 3, 1, 3}, {1, 3, 1, 2, 1, 2}, {3, 2, 2, 2, 3, 3}, {0, 0, 0, 0, 0, 0}, {0, 0, 0, 0, 0, 0}, {0, 0, 0, 0, 0, 0}};
std::vector<std::vector<char>> Tree10 = {{2, 2, 1, 1, 4, 4, 4, 1}, {3, 3, 2, 4, 1, 4, 2, 2}, {2, 1, 2, 3, 3, 3, 3, 1}, {4, 4, 1, 2, 4, 3, 2, 4}, {3, 1, 2, 3, 4, 1, 3, 3}, {4, 1, 2, 1, 2, 2, 2, 1}, {4, 1, 3, 4, 3, 1, 1, 3}, {4, 2, 4, 4, 2, 3, 1, 3}, {0, 0, 0, 0, 0, 0, 0, 0}, {0, 0, 0, 0, 0, 0, 0, 0}, {0, 0, 0, 0, 0, 0, 0, 0}};
std::vector<std::vector<char>> Tree11 = {{3, 2, 3, 3, 2, 5, 5, 4, 2, 5}, {4, 3, 5, 4, 4, 3, 2, 5, 5, 4}, {1, 5, 2, 1, 5, 4, 2, 3, 2, 4}, {5, 2, 1, 1, 1, 1, 4, 1, 4, 3}, {5, 3, 4, 2, 2, 5, 4, 2, 2, 1}, {2, 5, 2, 3, 4, 2, 1, 4, 1, 2}, {1, 1, 4, 2, 3, 3, 1, 5, 2, 4}, {3, 2, 3, 1, 1, 5, 1, 5, 5, 4}, {3, 4, 1, 1, 1, 2, 3, 1, 4, 3}, {3, 5, 5, 5, 3, 4, 5, 3, 4, 3}, {0, 0, 0, 0, 0, 0, 0, 0, 0, 0}, {0, 0, 0, 0, 0, 0, 0, 0, 0, 0}, {0, 0, 0, 0, 0, 0, 0, 0, 0, 0}};
std::vector<std::vector<char>> Tree12 = {{4, 4, 4, 3, 4, 5, 2, 3, 2, 3, 6, 5}, {6, 4, 2, 4, 6, 2, 2, 3, 2, 3, 2, 4}, {5, 4, 2, 3, 6, 1, 3, 1, 2, 4, 3, 4}, {1, 5, 2, 3, 4, 1, 1, 1, 5, 1, 2, 1}, {6, 6, 1, 5, 1, 5, 2, 5, 6, 3, 5, 6}, {5, 2, 2, 4, 6, 5, 3, 3, 1, 3, 2, 5}, {3, 4, 4, 6, 2, 1, 4, 4, 5, 6, 1, 5}, {1, 1, 3, 4, 1, 1, 4, 5, 2, 6, 1, 1}, {2, 4, 6, 6, 1, 6, 4, 5, 6, 3, 6, 6}, {5, 4, 6, 1, 5, 6, 3, 5, 6, 2, 1, 6}, {2, 4, 3, 5, 3, 2, 6, 3, 1, 1, 3, 2}, {5, 2, 4, 5, 3, 3, 5, 2, 4, 6, 5, 3}, {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0}, {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0}, {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0}};
std::vector<std::vector<char>> Tree13 = {{5, 7, 3, 3, 3, 7, 4, 2, 5, 2, 6, 6, 6, 1}, {3, 5, 5, 1, 5, 1, 4, 4, 7, 7, 6, 5, 7, 5}, {3, 3, 7, 2, 5, 6, 5, 7, 4, 5, 3, 2, 2, 5}, {6, 4, 2, 6, 2, 6, 3, 7, 5, 4, 7, 5, 4, 6}, {4, 5, 2, 6, 4, 4, 3, 1, 7, 7, 5, 3, 4, 1}, {3, 1, 1, 6, 5, 1, 5, 3, 3, 1, 1, 1, 4, 4}, {6, 2, 7, 2, 3, 3, 4, 3, 5, 7, 1, 2, 2, 4}, {4, 7, 3, 4, 4, 5, 2, 1, 2, 4, 2, 4, 2, 7}, {3, 6, 7, 2, 4, 6, 1, 3, 3, 4, 5, 1, 5, 3}, {2, 4, 1, 7, 4, 1, 2, 5, 1, 2, 3, 6, 7, 7}, {7, 3, 5, 7, 6, 7, 1, 6, 1, 3, 4, 2, 5, 4}, {6, 5, 7, 7, 6, 5, 6, 7, 3, 4, 1, 2, 6, 1}, {6, 2, 1, 6, 1, 2, 4, 5, 2, 6, 6, 7, 1, 5}, {3, 2, 7, 3, 1, 1, 3, 2, 7, 2, 6, 6, 6, 1}, {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0}, {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0}, {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0}};



input_data_t DATA1 = {
	.branches_on_tree = 3,
	.branch_len = 2,
	.TreeState = Tree1,
};

input_data_t DATA2 = {
	.branches_on_tree = 15,
	.branch_len = 4,
	.TreeState = Tree2,
};

input_data_t DATA3 = {
	.branches_on_tree = 5,
	.branch_len = 6,
	.TreeState = Tree3,
};

input_data_t DATA4 = {
	.branches_on_tree = 10,
	.branch_len = 4,
	.TreeState = Tree4,
};

input_data_t DATA5 = {
	.branches_on_tree = 17,
	.branch_len = 3,
	.TreeState = Tree5,
};

input_data_t DATA6 = {
	.branches_on_tree = 15,
	.branch_len = 4,
	.TreeState = Tree6,
};

input_data_t DATA7 = {
	.branches_on_tree = 13,
	.branch_len = 5,
	.TreeState = Tree7,
};

input_data_t DATA8 = {
	.branches_on_tree = 12,
	.branch_len = 6,
	.TreeState = Tree8,
};

input_data_t DATA9 = {
	.branches_on_tree = 9,
	.branch_len = 6,
	.TreeState = Tree9,
};

input_data_t DATA10 = {
	.branches_on_tree = 8,
	.branch_len = 11,
	.TreeState = Tree10,
};

input_data_t DATA11 = {
	.branches_on_tree = 0,
	.branch_len = 0,
	.TreeState = Tree11,
};

input_data_t DATA12 = {
	.branches_on_tree = 0,
	.branch_len = 0,
	.TreeState = Tree12,
};

input_data_t DATA13 = {
	.branches_on_tree = 0,
	.branch_len = 0,
	.TreeState = Tree13,
};


int main( void )
{
	input_data_t DATA = DATA9;
	auto start_state = TreeState(DATA.TreeState);
	auto Solver = AStarSolver(start_state);
	GlobalSolver_p = &Solver;
	auto ans = Solver.solve();
	printf("%d\n", ans.steps_amount);
	for(uint32_t i = 0; i < ans.steps_amount; i++)
	{
		printf("%d \t%d \t%d \t%c\n", i+1, ans.Moves[i].src_branch, ans.Moves[i].dst_branch, 'A' + ans.Moves[i].bird - 1);
	}
	system("pause");
	return 0;
}